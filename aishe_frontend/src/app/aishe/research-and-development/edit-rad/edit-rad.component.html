<div class="container-fluid reg-page-bg pl-4 pr-4">
    <!-- <div class="form-group">
        <div class="form-row mr-0 ml-0">
            <div class="col-md-12 mt-0 badges p-2 mt-3">
                <div class="float-left">
                    <span class="font-weight-bold text-lg">Edit R&D Institute</span>
                </div>
            </div>
        </div>
    </div> -->
    <div class="animated fadeInDown card shadow mb-4 pt-1 pb-2 pr-4 pl-4 bg-light">
        <form [formGroup]="researchForm" autocomplete="off" >
            <div class="row col-md-12 overflow-hidden pt-3">
                <div class="col-md-3">
                    <mat-form-field class="d-block">
                        <mat-label>AISHE Code:</mat-label>
                        <input type="text" matInput autocomplete="off" formControlName="aisheCode">

                    </mat-form-field>
                    <!-- <mat-hint *ngIf="showErrorMsg" style="color: red;font-size: medium;">{{errorMsg}}</mat-hint> -->
                </div>

                <div class="col-md-9" *ngIf="showField">
                    <mat-form-field class="d-block">
                        <mat-label>Name of the R&D Institute:</mat-label>
                        <input type="text" matInput autocomplete="off" formControlName="instituteName" required
                            [errorStateMatcher]="errorMatcher" (keyup)="getSimilarIns()" style="text-transform: uppercase;">
                    </mat-form-field>
                    <mat-hint class="err-msgs"
                        *ngIf="researchForm.controls['instituteName'].dirty || researchForm.controls['instituteName'].value || researchForm.controls['instituteName'].touched || isFormInvalid">
                        <span *ngIf="researchForm.controls['instituteName'].hasError('required')"
                            class="errorMessage">Please enter
                        </span>
                    </mat-hint>
                </div>
                <!-- <div class="col-md-3" *ngIf="showField">
                    <mat-form-field class="d-block">
                        <mat-label>Survey Year:</mat-label>
                        <mat-select formControlName="surveyYear" required [errorStateMatcher]="errorMatcher">
                            <mat-option *ngFor="let year of surveyYearList" [value]="year">{{year}}</mat-option>
                          </mat-select>
                    </mat-form-field>
                    <mat-hint class="err-msgs"
                        *ngIf="researchForm.controls['surveyYear'].dirty || researchForm.controls['surveyYear'].value || researchForm.controls['surveyYear'].touched || isFormInvalid">
                        <span *ngIf="researchForm.controls['surveyYear'].hasError('required')"
                            class="errorMessage">Please select
                        </span>
                    </mat-hint>
                </div> -->
                <div class="col-md-3" *ngIf="showField">
                    <mat-form-field class="d-block">
                        <mat-label>Administrative Ministry:</mat-label>
                        <mat-select required formControlName="ministryId" [errorStateMatcher]="errorMatcher" >
                            <mat-select-filter [array]="ministryArray" [displayMember]="'name'"
                                (filteredReturn)="ministryList = $event">
                            </mat-select-filter>
                            <mat-option *ngFor="let data of ministryList" [value]="data.id">{{data.name}}</mat-option>
                        </mat-select>
                    </mat-form-field>
                    <mat-hint class="err-msgs"
                        *ngIf="researchForm.controls['ministryId'].dirty || researchForm.controls['ministryId'].value || researchForm.controls['ministryId'].touched || isFormInvalid">
                        <span *ngIf="researchForm.controls['ministryId'].hasError('required')"
                            class="errorMessage">Please select
                        </span>
                    </mat-hint>
                </div>
                <div class="col-md-3" *ngIf="showField">
                    <mat-form-field class="d-block">
                        <mat-label>State:</mat-label>
                        <mat-select (selectionChange)="getDistrictList($event.value)" required
                            formControlName="stateCode" [errorStateMatcher]="errorMatcher">
                            <mat-select-filter [array]="stateListArray" [displayMember]="'name'"
                                (filteredReturn)="stateList = $event">
                            </mat-select-filter>
                            <mat-option *ngFor="let data of stateList"
                                [value]="data.stateCode">{{data.name}}</mat-option>
                        </mat-select>
                    </mat-form-field>
                    <mat-hint class="err-msgs"
                    *ngIf="researchForm.controls['stateCode'].dirty || researchForm.controls['stateCode'].value || researchForm.controls['stateCode'].touched || isFormInvalid">
                    <span *ngIf="researchForm.controls['stateCode'].hasError('required')"
                        class="errorMessage">Please select
                    </span>
                </mat-hint>
                </div>
                <div class="col-md-3" *ngIf="showField">
                    <mat-form-field class="d-block">
                        <mat-label>District:</mat-label>
                        <mat-select required formControlName="districtCode" [errorStateMatcher]="errorMatcher" (selectionChange)="getSimilarIns()">
                            <mat-select-filter [array]="districtListArray" [displayMember]="'name'"
                                (filteredReturn)="districtList = $event">
                            </mat-select-filter>
                            <mat-option *ngFor="let data of districtList"
                                [value]="data.distCode">{{data.name}}</mat-option>
                        </mat-select>
                    </mat-form-field>
                    <mat-hint class="err-msgs"
                    *ngIf="researchForm.controls['districtCode'].dirty || researchForm.controls['districtCode'].value || researchForm.controls['districtCode'].touched || isFormInvalid">
                    <span *ngIf="researchForm.controls['districtCode'].hasError('required')"
                        class="errorMessage">Please select
                    </span>
                </mat-hint>
                </div>
            </div>
            <h3 class="heading" *ngIf="showField">Nodal Officer Details:</h3>
            <div class="row col-md-12 overflow-hidden pt-3" *ngIf="showField">
                <div class="col-md-3">
                    <mat-form-field class="d-block">
                        <mat-label>Name:</mat-label>
                        <input type="text" matInput required formControlName="firstName"
                            [errorStateMatcher]="errorMatcher">
                    </mat-form-field>
                    <mat-hint class="err-msgs"
                        *ngIf="researchForm.controls['firstName'].dirty || researchForm.controls['firstName'].value || researchForm.controls['firstName'].touched || isFormInvalid">
                        <span *ngIf="researchForm.controls['firstName'].hasError('required')"
                            class="errorMessage">Please enter
                        </span>
                    </mat-hint>
                </div>
                <div class="col-md-3">
                    <mat-form-field class="d-block">
                        <mat-label>Gender:</mat-label>
                        <mat-select required formControlName="personGender" [errorStateMatcher]="errorMatcher">
                            <mat-option *ngFor="let data of genderList" [value]="data.id">{{data.name}}</mat-option>
                        </mat-select>
                    </mat-form-field>
                    <mat-hint class="err-msgs"
                    *ngIf="researchForm.controls['personGender'].dirty || researchForm.controls['personGender'].value || researchForm.controls['personGender'].touched || isFormInvalid">
                    <span *ngIf="researchForm.controls['personGender'].hasError('required')"
                        class="errorMessage">Please select
                    </span>
                </mat-hint>

                </div>
                <div class="col-md-3">
                    <mat-form-field class="d-block">
                        <mat-label>Designation:</mat-label>
                        <input type="text" matInput required formControlName="personDesignation"
                            [errorStateMatcher]="errorMatcher">
                    </mat-form-field>
                    <mat-hint class="err-msgs"
                    *ngIf="researchForm.controls['personDesignation'].dirty || researchForm.controls['personDesignation'].value || researchForm.controls['personDesignation'].touched || isFormInvalid">
                    <span *ngIf="researchForm.controls['personDesignation'].hasError('required')"
                        class="errorMessage">Please select
                    </span>
                </mat-hint>
                </div>
                <div class="col-md-3">
                    <mat-form-field class="d-block">
                        <mat-label>Email:</mat-label>
                        <input type="text" matInput required formControlName="personEmail"
                            (keypress)="onKeypressEvent($event,100)" [errorStateMatcher]="errorMatcher">
                    </mat-form-field>
                    <mat-hint class="err-msgs"
                        *ngIf="researchForm.controls['personEmail'].dirty || researchForm.controls['personEmail'].value || researchForm.controls['personEmail'].touched || isFormInvalid">
                        <span *ngIf="researchForm.controls['personEmail'].hasError('required')"
                            class="errorMessage">Please enter
                        </span>
                        <span *ngIf="researchForm.controls['personEmail'].hasError('pattern')"
                            class="errorMessage">Invalid email.
                        </span>
                    </mat-hint>
                </div>
                <div class="col-md-3">
                    <mat-form-field class="d-block">
                        <mat-label>Mobile:</mat-label>
                        <input type="text" matInput autocomplete="off" appInputNumbersOnly required
                            formControlName="personMobile" (keypress)="onKeypressEvent($event,10)"
                            [errorStateMatcher]="errorMatcher">
                    </mat-form-field>
                    <mat-hint class="err-msgs"
                        *ngIf="researchForm.controls['personMobile'].dirty || researchForm.controls['personMobile'].value || researchForm.controls['personMobile'].touched || isFormInvalid">
                        <span *ngIf="researchForm.controls['personMobile'].hasError('required')"
                            class="errorMessage">Please enter
                        </span>
                        <span *ngIf="researchForm.controls['personMobile'].hasError('pattern')"
                            class="errorMessage">Invalid Number.
                        </span>
                    </mat-hint>
                </div>
                <div class="col-md-1">
                    <mat-form-field class="d-block">
                        <mat-label>STD Code</mat-label>
                        <input matInput type="text" placeholder="STD Code" autocomplete="off"
                            (keypress)="onKeypressEvent($event,5)" formControlName="stdCode" appInputNumbersOnly>
                    </mat-form-field>
                </div>
                <div class="col-md-2">
                    <mat-form-field class="d-block">
                        <mat-label>Phone Number</mat-label>
                        <input matInput type="text" placeholder="Phone Number" autocomplete="off"
                            (keypress)="onKeypressEvent($event,13)" formControlName="personLandline"
                            appInputNumbersOnly>
                    </mat-form-field>
                </div>

                <div class="col-md-9">
                    <mat-form-field class="d-block">
                        <mat-label>Complete Address:</mat-label>
                        <input type="text" matInput autocomplete="off" formControlName="personLine1"
                            [errorStateMatcher]="errorMatcher">
                    </mat-form-field>
                </div>

                <div class="col-md-3">
                    <mat-form-field class="d-block">
                        <mat-label>Pin code:</mat-label>
                        <input type="number" matInput autocomplete="off" appInputNumbersOnly
                            formControlName="personPincode" (keypress)="onKeypressEvent($event,6)"
                            [errorStateMatcher]="errorMatcher">
                    </mat-form-field>
                </div>
            </div>
            <h3 class="heading" *ngIf="showField">Institution Head Details:</h3>
            <div class="row col-md-12 overflow-hidden pt-3" *ngIf="showField">
                <div class="col-md-3">
                    <mat-form-field class="d-block">
                        <mat-label>Name:</mat-label>
                        <input type="text" matInput required formControlName="directorName"
                            [errorStateMatcher]="errorMatcher">
                    </mat-form-field>
                    <mat-hint class="err-msgs"
                    *ngIf="researchForm.controls['directorName'].dirty || researchForm.controls['directorName'].value || researchForm.controls['directorName'].touched || isFormInvalid">
                    <span *ngIf="researchForm.controls['directorName'].hasError('required')"
                        class="errorMessage">Please enter
                    </span>
                </mat-hint>
                </div>
                <div class="col-md-3">
                    <mat-form-field class="d-block">
                        <mat-label>Gender:</mat-label>
                        <mat-select required formControlName="directorGender" [errorStateMatcher]="errorMatcher">
                            <mat-option *ngFor="let data of genderList" [value]="data.id">{{data.name}}</mat-option>
                        </mat-select>
                    </mat-form-field>
                    <mat-hint class="err-msgs"
                    *ngIf="researchForm.controls['directorGender'].dirty || researchForm.controls['directorGender'].value || researchForm.controls['directorGender'].touched || isFormInvalid">
                    <span *ngIf="researchForm.controls['directorGender'].hasError('required')"
                        class="errorMessage">Please select
                    </span>
                </mat-hint>
                </div>
                <div class="col-md-3">
                    <mat-form-field class="d-block">
                        <mat-label>Designation:</mat-label>
                        <input type="text" matInput required formControlName="directorDesignation"
                            [errorStateMatcher]="errorMatcher">
                    </mat-form-field>
                    <mat-hint class="err-msgs"
                    *ngIf="researchForm.controls['directorDesignation'].dirty || researchForm.controls['directorDesignation'].value || researchForm.controls['directorDesignation'].touched || isFormInvalid">
                    <span *ngIf="researchForm.controls['directorDesignation'].hasError('required')"
                        class="errorMessage">Please enter
                    </span>
                </mat-hint>
                </div>
                <div class="col-md-3">
                    <mat-form-field class="d-block">
                        <mat-label>Email:</mat-label>
                        <input type="text" matInput required formControlName="directorEmail"
                            (keypress)="onKeypressEvent($event,100)" [errorStateMatcher]="errorMatcher">
                    </mat-form-field>
                    <mat-hint class="err-msgs"
                        *ngIf="researchForm.controls['directorEmail'].dirty || researchForm.controls['directorEmail'].value || researchForm.controls['directorEmail'].touched || isFormInvalid">
                        <span *ngIf="researchForm.controls['directorEmail'].hasError('required')"
                            class="errorMessage">Please enter
                        </span>
                        <span *ngIf="researchForm.controls['directorEmail'].hasError('pattern')"
                            class="errorMessage">Invalid email.
                        </span>
                    </mat-hint>

                </div>
                <div class="col-md-3">
                    <mat-form-field class="d-block">
                        <mat-label>Mobile:</mat-label>
                        <input type="text" matInput autocomplete="off" appInputNumbersOnly required
                            formControlName="directorMobile" (keypress)="onKeypressEvent($event,10)"
                            [errorStateMatcher]="errorMatcher">

                    </mat-form-field>
                    <mat-hint class="err-msgs"
                        *ngIf="researchForm.controls['directorMobile'].dirty || researchForm.controls['directorMobile'].value || researchForm.controls['directorMobile'].touched || isFormInvalid">
                        <span *ngIf="researchForm.controls['directorMobile'].hasError('required')"
                            class="errorMessage">Please enter
                        </span>
                        <span *ngIf="researchForm.controls['directorMobile'].hasError('pattern')"
                            class="errorMessage">Invalid Number.
                        </span>
                    </mat-hint>


                </div>

                <!-- <div class="col-md-2 mt-4">
                    <label class="font-weight-semibold text-sm asterisk_input">Upload Relevant Documents</label>&nbsp;
                </div>
                <div class="col-md-3 mt-3">
                    <input class="form-control form-control-sm" type="file" accept="application/pdf"
                        (change)="getFileDetails($event)" #fileInput id="uploadFile" name="uploadFile"
                        title="Upload Relevant Documents" [disabled]="disabledUpload">
                </div> -->
            </div>

            <div class="text-center" *ngIf="showField">
                <button type="submit" class="btn btn-success btn-sm mr-1" (click)="save()"
                    matTooltip="Save" >Update</button>
                <!-- <button type="reset" class="btn btn-danger btn-sm mr-1" (click)="reset()"
                    matTooltip="Reset">Reset</button> -->
                <button type="reset" class="btn btn-danger btn-sm mr-1" (click)="cancel()"
                matTooltip="Reset">Cancel</button>    
            </div>
        </form>
    </div>
</div>
