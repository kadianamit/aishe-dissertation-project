
<div class="container-fluid reg-page-bg pl-4 pr-4">
    <section class="p-3" *ngIf="userData === 'true'">
      <div class="container">
          <mat-card class="border-radius: 10px shadow bg-white border">
            <div class="border-bottom-dark col-md-12 mb-2 text-center">
              <h5 style="font-weight: 500; font-size: 18px;">Edit Registration</h5>
          </div>
              <form [formGroup]="dataUserRegistation" autocomplete="off">
                  <div class="col-md-12">
                      <mat-form-field class="d-block">
                          <mat-label>First Name</mat-label>
                          <input matInput type="text" formControlName="firstName" placeholder="First Name" required />
                      </mat-form-field>
                      <mat-hint class="err-msgs"
                          *ngIf="dataUserRegistation.controls['firstName'].dirty || dataUserRegistation.controls['firstName'].value || dataUserRegistation.controls['firstName'].touched || isFormInvalid ">
                          <span *ngIf="dataUserRegistation.controls['firstName'].hasError('required')">Please enter
                          </span>
                      </mat-hint>
                  </div>
    
                  <div class="col-md-12">
                      <mat-form-field class="d-block">
                          <mat-label>Last Name</mat-label>
                          <input matInput type="text" formControlName="lastName" placeholder="Last Name"
                              autocomplete="off" required />
                      </mat-form-field>
                      <mat-hint class="err-msgs"
                          *ngIf="dataUserRegistation.controls['lastName'].dirty || dataUserRegistation.controls['lastName'].value || dataUserRegistation.controls['lastName'].touched || isFormInvalid ">
                          <span *ngIf="dataUserRegistation.controls['lastName'].hasError('required')">Please enter
                          </span>
                      </mat-hint>
                  </div>
                  <div class="col-md-12">
                    <mat-form-field class="d-block">
                        <mat-label>Email</mat-label>
                        <input matInput type="text" autocomplete="off" matTooltipPosition="above"
                            matTooltipClass="blackTooltip" formControlName="emailId" placeholder="Email"
                             required />
                        <mat-hint>E.g. user123@xyz.com</mat-hint>
                    </mat-form-field>
                    <mat-hint class="err-msgs mt-3"
                      *ngIf="dataUserRegistation.controls['emailId'].dirty ||dataUserRegistation.controls['emailId'].value || dataUserRegistation.controls['emailId'].touched || isFormInvalid">
                      <span *ngIf="
                              dataUserRegistation.controls['emailId'].hasError(
                                'required'
                              )
                            " class="errorMessage">Please enter.</span>
                      <span *ngIf="
                              dataUserRegistation.controls['emailId'].hasError(
                                'pattern'
                              )
                            " class="errorMessage">Invalid Email.</span>
                  </mat-hint>
                </div>
                  <div class="col-md-12">
                      <mat-form-field class="d-block">
                          <mat-label>User Type</mat-label>
                          <mat-select formControlName="userType" placeholder="User Type" autocomplete="off"
                              required>
                              <mat-select-filter [array]="usertype" [displayMember]="'userType'"
                                  (filteredReturn)="filteredList1 = $event"></mat-select-filter>
                              <mat-option *ngFor="let utype of filteredList1  " [value]="utype.id">
                                  {{utype.userType}}
                              </mat-option>
                          </mat-select>
                      </mat-form-field>
                      <mat-hint class="err-msgs"
                          *ngIf="dataUserRegistation.controls['userType'].dirty || dataUserRegistation.controls['userType'].value || dataUserRegistation.controls['userType'].touched || isFormInvalid ">
                          <span *ngIf="dataUserRegistation.controls['userType'].hasError('required')">Please select
                          </span>
                      </mat-hint>
                  </div>
                  <div class="col-md-12">
                      <mat-form-field class="d-block">
                          <mat-label>Country</mat-label>
                          <mat-select formControlName="country" (selectionChange)="loadStates($event.value)" required>
                              <mat-select-filter [array]="country" [displayMember]="'name'"
                                  (filteredReturn)="filterdCountry = $event"></mat-select-filter>
                              <mat-option *ngFor="let countryObj of filterdCountry" [value]="countryObj.id">
                                  {{countryObj.name}}
                              </mat-option>
                          </mat-select>
                      </mat-form-field>
                      <mat-hint class="err-msgs"
                          *ngIf="dataUserRegistation.controls['country'].dirty || dataUserRegistation.controls['country'].value || dataUserRegistation.controls['country'].touched || isFormInvalid ">
                          <span *ngIf="dataUserRegistation.controls['country'].hasError('required')">Please select
                          </span>
                      </mat-hint>
                  </div>
                  <div class="col-md-12">
                      <mat-form-field class="countryCode" style="border-right: 1px;">
                          <mat-label>Country Code</mat-label>
                          <input matInput type="text" formControlName="stdCode" readonly placeholder="Country Code"
                               />
                      </mat-form-field>
                      <span style="margin-right: 4px;"></span>
                      <mat-form-field class="mobileNumber">
                          <mat-label>Mobile Number</mat-label>
                          <input matInput formControlName="phoneMobile" placeholder="Mobile number" type="text"
                              appInputNumbersOnly  (keypress)="onKeypressEvent($event,10)" />
                      </mat-form-field>
                      <mat-hint class="err-msgs mt-3"
                          *ngIf="dataUserRegistation.controls['phoneMobile'].dirty ||dataUserRegistation.controls['phoneMobile'].value || dataUserRegistation.controls['phoneMobile'].touched || isFormInvalid">
                          <span *ngIf="
                                  dataUserRegistation.controls['phoneMobile'].hasError(
                                    'required'
                                  )
                                " class="errorMessage">Please enter.</span>
                          <span *ngIf="
                                dataUserRegistation.controls['phoneMobile'].hasError(
                                  'pattern'
                                )
                              " class="errorMessage">Invalid.</span>
                      </mat-hint>
                  </div>
                  <div class="col-md-12">
                      <mat-form-field class="d-block">
                          <mat-label>State</mat-label>
                          <mat-select formControlName="addressStateCode" (selectionChange)="loadDistricts($event.value)"
                              required>
                              <mat-select-filter [array]="state" [displayMember]="'name'"
                                  (filteredReturn)="filterdState = $event"></mat-select-filter>
                              <mat-option *ngFor="let stateObj of filterdState " [value]="stateObj.stateCode">
                                  {{stateObj.name}}
                              </mat-option>
                          </mat-select>
                      </mat-form-field>
                      <mat-hint class="err-msgs"
                          *ngIf="dataUserRegistation.controls['addressStateCode'].dirty || dataUserRegistation.controls['addressStateCode'].value || dataUserRegistation.controls['addressStateCode'].touched || isFormInvalid ">
                          <span *ngIf="dataUserRegistation.controls['addressStateCode'].hasError('required')">Please
                              select
                          </span>
                      </mat-hint>
                  </div>
                  <div class="col-md-12">
                      <mat-form-field class="d-block">
                          <mat-label>District</mat-label>
                          <mat-select matInput formControlName="addressDistrictCode" required>
                              <mat-select-filter [array]="district" [displayMember]="'name'"
                                  (filteredReturn)="filterdDistrict = $event"></mat-select-filter>
                              <mat-option *ngFor="let districtObj of filterdDistrict " [value]="districtObj.distCode">
                                  {{districtObj.name}}
                              </mat-option>
                          </mat-select>
                      </mat-form-field>
                      <mat-hint class="err-msgs"
                          *ngIf="dataUserRegistation.controls['addressDistrictCode'].dirty || dataUserRegistation.controls['addressDistrictCode'].value || dataUserRegistation.controls['addressDistrictCode'].touched || isFormInvalid ">
                          <span *ngIf="dataUserRegistation.controls['addressDistrictCode'].hasError('required')">Please
                              select
                          </span>
                      </mat-hint>
                  </div>
                  
                  
              </form>
              <div class="form-group text-center mt-2">
                  <button class="btn btn-success btn-sm" type="button" (click)="submit()">Update</button>
              </div>
          </mat-card>
      </div>
    </section>
    <section *ngIf="userData !== 'true'">
      <div class="form-group">
        <div class="form-row mr-0 ml-0">
          <div class="col-md-12 mt-0 badges p-2 mt-3">
            <div class="float-left">
              <span class="font-weight-bold text-lg">Contact Details of the Institution</span>
            </div>
            <!-- <div class="float-right">
              <span class="font-weight-bold text-lg" (click)="showEnabled()" style="cursor: pointer;">Please click here for update</span>
            </div> -->
            <div class="float-right">
              <span class="hyperlink" (click)="showEnabled()">Please click here for update</span>
            </div>
          </div>
        </div>
      </div>
      <!-- <div class="col-md-12 font-weight-bolder pt-1 pb-2 pr-2 pl-2 text-center text-lg">
        Edit Registration
      
      </div> -->
     
      <form [formGroup]="editReg" (ngSubmit)="saveEditReg()" autocomplete="off">
        <div class="animated fadeInDown card shadow mb-4 pt-1 pb-2 pr-3 pl-3 bg-light">
         
          <h3 class="heading">Institution Head Details:</h3>
          <div class="row col-md-12 overflow-hidden pt-3">
             <!-- <div class="col-md-4">
              <mat-form-field class="d-block">
                <mat-label>Title:</mat-label>
                <mat-select formControlName="headOfficerTitleId" required>
                  <mat-option *ngFor="let o of titleList" [value]="o.id">
                    {{o.name}}
                  </mat-option>
                </mat-select>
                <mat-error
                  *ngIf="editReg.controls['headOfficerTitleId'].hasError('required')">
                  Please select.
                </mat-error>
              </mat-form-field>
            </div> -->
            <div class="col-md-4">
              <mat-form-field class="d-block">
                <mat-label>Name of Vice Chancellor/Director/Head/Principal:
                </mat-label>
                <input matInput type="text" appAlphabet formControlName="directorName" required autocomplete="off"
                  (keypress)="onKeypressEvent($event,100)"
                  placeholder="Name of Vice Chancellor/Director/Head/Principal">
                <mat-error
                  *ngIf="editReg.controls['directorName'].hasError('required')">
                  Please enter name.
                </mat-error>
                <mat-error
                *ngIf="editReg.controls['directorName'].hasError('pattern')">
                Please enter valid name(Only .(dot), white space & alphabets are allowed).
              </mat-error>
              </mat-form-field>
            </div>
            <div class="col-md-4">
              <mat-form-field class="d-block">
                <mat-label>Designation:</mat-label>
                <input matInput type="text" formControlName="directordesignation" appAlphabet autocomplete="off"
                  (keypress)="onKeypressEvent($event,100)" placeholder="Designation">
              </mat-form-field>
            </div>
            <div class="col-md-4">
              <mat-form-field class="d-block">
                <mat-label>Email:</mat-label>
                <input matInput type="text" formControlName="directorEmail" required autocomplete="off"
                  (keypress)="onKeypressEvent($event,100)" placeholder="Email">
                <mat-error *ngIf="editReg.controls['directorEmail'].hasError('required')">
                  Please enter Email.
                </mat-error>
                <mat-error *ngIf="editReg.controls['directorEmail'].hasError('pattern')">
                  Please enter Valid Email.
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-md-4">
              <mat-form-field class="d-block">
                <mat-label>Mobile No.</mat-label>
                <input matInput type="text" formControlName="directorMobile" autocomplete="off" required appOnlyNumeric
                  (keypress)="onKeypressEvent($event,10)" placeholder="Mobile No.">
                <mat-error *ngIf="editReg.controls['directorMobile'].hasError('required')">
                  Please enter Mobile No.
                </mat-error>
                <!-- <mat-error *ngIf="editReg.controls['directorMobile'].hasError('minlength')">
                  Please Enter 10 digit Mobile Number.
                </mat-error> -->
                <mat-error *ngIf="editReg.controls['directorMobile'].hasError('pattern')">
                  Please enter valid Mobile No.
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-md-4">
              <mat-form-field class="d-block">
                <mat-label>Telephone No. (with STD
                  code):</mat-label>
                <input matInput type="text" formControlName="directorTelephone" autocomplete="off"
                  (keypress)="onKeypressEvent($event,13)" appOnlyNumeric placeholder="Telephone No.(with STD code)">
              </mat-form-field>
            </div>
          </div>
          <h3 class="heading">Nodal Officer Details:</h3>
          <div class="row col-md-12 overflow-hidden pt-3">
             <!-- <div class="col-md-4">
              <mat-form-field class="d-block">
                <mat-label>Title:</mat-label>
                <mat-select formControlName="nodalOfficerTitleId" required>
                  <mat-option *ngFor="let o of titleList" [value]="o.id">
                    {{o.name}}
                  </mat-option>
                </mat-select>
                <mat-error
                  *ngIf="editReg.controls['nodalOfficerTitleId'].hasError('required')">
                  Please select.
                </mat-error>
              </mat-form-field>
            </div>  -->
            <div class="col-md-4">
              <mat-form-field class="d-block">
                <mat-label>Name of Nodal Officer for AISHE:
                </mat-label>
                <input matInput type="text" appAlphabet formControlName="nodalOfficerName" required autocomplete="off"
                  (keypress)="onKeypressEvent($event,100)" placeholder="Name of Nodal Officer for AISHE">
                <mat-error
                  *ngIf="editReg.controls['nodalOfficerName'].hasError('required')">
                  Please enter Name of Nodal Officer.
                </mat-error>
                <mat-error
                *ngIf="editReg.controls['nodalOfficerName'].hasError('pattern')">
                Please enter valid name(Only .(dot),white space & alphabets are allowed).
              </mat-error>
              </mat-form-field>
            </div>
            <div class="col-md-4">
              <mat-form-field class="d-block">
                <mat-label>Designation:</mat-label>
                <input matInput type="text" formControlName="designation" required appAlphabet autocomplete="off"
                  (keypress)="onKeypressEvent($event,100)" placeholder="Designation">
                <mat-error
                  *ngIf="editReg.controls['designation'].hasError('required') || editReg.controls['designation'].dirty || editReg.controls['designation'].value || editReg.controls['designation'].touched">
                  Please enter Designation.
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col-md-4">
              <mat-form-field class="d-block">
                <mat-label>Telephone No. (with STD
                  code):</mat-label>
                <input matInput type="text" placeholder="Phone Number" autocomplete="off"
                  (keypress)="onKeypressEvent($event,13)" formControlName="landLine" appOnlyNumeric>
              </mat-form-field>
            </div>
          </div>
          <div class="row col-md-12 overflow-hidden">
            <div class="col-md-3">
              <mat-form-field class="d-block">
                <mat-label>Email :</mat-label>
                <input matInput type="text" placeholder="Email" required autocomplete="off"
                  formControlName="email">
              </mat-form-field>
              <mat-hint class="err-msgs"
                *ngIf="editReg.controls['email'].dirty || editReg.controls['email'].value || editReg.controls['email'].touched || isFormInvalid ">
               
                <span *ngIf="editReg.controls['email'].hasError('required')">Please enter
                </span>
                <span *ngIf="editReg.controls['email'].hasError('pattern')">Invalid Email
                </span>
              </mat-hint>
            </div>
            <div class="col-md-3 mt-3" *ngIf="!hideButton">
              <i *ngIf="successVerifyOTP" class="fa-solid fa-circle-check text-lg" style="color: green;"></i>&nbsp;
              <span style="font-size: smaller;font-weight: 500;">Verified Date :{{emailVerifiedDate}}</span>
            </div>

            <div class="col-md-2" *ngIf="emailOtp">
              <mat-form-field class="d-block">
                <mat-label>Email OTP</mat-label>
                <input matInput type="text" placeholder="Email OTP" required formControlName="emailOtp"
                  autocomplete="off" appOnlyNumeric>
                  
              </mat-form-field>
              <mat-hint class="err-msgs"
                  *ngIf="editReg.controls['emailOtp'].dirty || editReg.controls['emailOtp'].value || editReg.controls['emailOtp'].touched || isFormInvalid ">
                  <span *ngIf="editReg.controls['emailOtp'].hasError('required')">Please enter
                  </span>
                
                </mat-hint>
              <mat-hint class="timer">OTP is valid for 15 minutes !</mat-hint>
            </div>
            <div class="col-md-1 mt-3" *ngIf="emailOtp">
              <span class="timer" *ngIf="displayE !== '00:00'">{{displayE}}</span>
              <button type="button" class="btn btn-warning btn-sm" *ngIf="displayE === '00:00'" (click)="sendEmailOTP()">Resend OTP</button>
            </div>
    
            <div class="col-md-2 mt-3" *ngIf="emailOtp">
              <button class="btn btn-dark btn-sm" type="button" (click)="verifyEmailOTP()">Verify Email OTP</button>
            </div>
    
          </div>
          <!-- <div class="row col-md-12 overflow-hidden">
            <div class="col-md-6">
              <mat-label><span style="font-weight: 400;font-size: 13px;">Email Verified Date:</span>{{emailVerifiedDate}}</mat-label>
            </div>
             
  
          </div> -->
          <div class="row col-md-12 overflow-hidden mt-2">
            <div class="col-md-3">
              <mat-form-field class="d-block">
                <mat-label>Mobile </mat-label>
                <input matInput type="text" placeholder="Mobile" required autocomplete="off"
                  formControlName="mobileNo"  (keypress)="onKeypressEvent($event,10)" appOnlyNumeric>
              </mat-form-field>
              <mat-hint class="err-msgs"
              *ngIf="editReg.controls['mobileNo'].dirty || editReg.controls['mobileNo'].value || editReg.controls['mobileNo'].touched || isFormInvalid ">
              <span *ngIf="editReg.controls['mobileNo'].hasError('required')">Please enter
              </span>
              <!-- <span *ngIf="editReg.controls['mobileNo'].hasError('minlength')">Please Enter 10 digit Mobile Number.
              </span> -->
              <span *ngIf="editReg.controls['mobileNo'].hasError('pattern')">Invalid Number.
              </span>
            </mat-hint>
            </div>
            <div class="col-md-3 mt-3" *ngIf="!hideButton">
              <i *ngIf="successVerifyMobileOTP" class="fa-solid fa-circle-check text-lg" style="color: green;"></i>&nbsp;
              <span style="font-size: smaller;font-weight: 500;">Verified Date :{{mobileVerifiedDate}}</span>
            </div>
            <!-- <div class="col-md-1 mt-3" *ngIf="successVerifyMobileOTP">
              <i *ngIf="mobileVerifiedData" class="fa-solid fa-circle-check text-lg" style="margin-top: 5px;
              color: green;
              float: left;"></i>
              <i *ngIf="!mobileVerifiedData" class="fa-solid fa-circle-check text-lg" style="margin-top: 5px;
              color: red;
              float: left;"></i>
            </div> -->
            <!-- <div class="col-md-2 mt-3" *ngIf="!mobileOtp && hide">
              <label class="label">Verify Mobile Number<span style="color: red;">*</span></label>
            </div> -->
            <div class="col-md-3 mt-3" *ngIf="hideButton" [ngClass]="{disabledDiv:disabledMobile}">
              <button class="btn btn-danger btn-sm" type="button" (click)="sendMobileOTP()">Send Mobile OTP</button>
            </div>
            <div class="col-md-2" *ngIf="mobileOtp">
              <mat-form-field class="d-block">
                <mat-label>Mobile OTP</mat-label>
                <input matInput type="text" placeholder="Mobile OTP" required autocomplete="off"
                  formControlName="mobileOtp" (keypress)="restrictNumeric($event)" appOnlyNumeric>
                 
              </mat-form-field>
              <mat-hint class="err-msgs"
              *ngIf="editReg.controls['mobileOtp'].dirty || editReg.controls['mobileOtp'].value || editReg.controls['mobileOtp'].touched || isFormInvalid ">
              <span *ngIf="editReg.controls['mobileOtp'].hasError('required')">Please enter
              </span>
            
            </mat-hint>
              <mat-hint class="timer">OTP is valid for 15 minutes !</mat-hint>
            </div>
           
    
            <div class="col-md-1 mt-3" *ngIf="mobileOtp">
              <span class="timer" *ngIf="display !== '00:00'">{{display}}</span>
              <button type="button" class="btn btn-warning btn-sm" *ngIf="display === '00:00'" (click)="sendMobileOTP()">Resend OTP</button>
            </div>
            <div class="col-md-2 mt-3" *ngIf="mobileOtp">
              <button class="btn btn-dark btn-sm" type="button" (click)="verifyMobileOTP()">Verify Mobile OTP</button>
            </div>
    
          </div>
          <!-- <div class="row col-md-12 overflow-hidden">
            <div class="col-md-6">
              <mat-label><span style="font-weight: 400;font-size: 13px;">Mobile Verified Date:</span>{{mobileVerifiedDate}}</mat-label>
            </div>

             
  
          </div> -->

        </div>
  
  
  
       
        
        <div class="text-center" *ngIf="hideButton">
          <button type="submit" class="btn btn-success btn-sm mr-1"
            matTooltip="Save"><i class="fa fa-floppy-o"></i>&nbsp;Update</button>
    
        </div>
          
      </form>
    </section>
   
</div>

