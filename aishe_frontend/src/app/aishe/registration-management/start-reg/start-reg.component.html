
<div class="container-fluid reg-page-bg pl-4 pr-4">
    <div class="">
      <form [formGroup]="formStartReg"  #myForm="ngForm" (ngSubmit)="submit()">
       <div class="row">
        <div class="col-md-4"></div>
        <div class="col-md-4">
            <div class="card row justify-content-between" class="bg-light">
                <!-- <h2 class="font-weight-bold text-lg mt-2">Registration Management</h2> -->
                <div class="col-md-12">
                    <mat-form-field  class="d-block mt-3">
                        <mat-label>Survey Year</mat-label>
                        <!-- <mat-select required
                          formControlName="surveyYearValue">
                          <mat-option value="">Select Year</mat-option>
                          <mat-option
                            *ngFor="let year of surveyYearList"
                            [value]="year.year"
                            >{{ year.year }}</mat-option
                          >
                        </mat-select> -->
                        <input matInput formControlName="surveyYearValue"  (keypress)="alphaNumberOnly($event)" maxlength="4"/>
                        
                        <mat-error
                        *ngIf="isFormInvalid && formStartReg.controls['surveyYearValue'].hasError('required')">
                        Please enter Survey Year
                      </mat-error>
                      <mat-error
                      *ngIf="formStartReg.controls['surveyYearValue'].hasError('pattern') || formStartReg.controls['surveyYearValue'].dirty || formStartReg.controls['surveyYearValue'].value || formStartReg.controls['surveyYearValue'].touched">
                      Please enter Valid Year {{validationMsg}}
                    </mat-error>
                      </mat-form-field>
                </div>
                <div class="col-md-12">
                    <mat-form-field class="d-block mt-3">
                        <mat-label>From Date</mat-label>
                        <input matInput [ngxMatDatetimePicker]="picker" placeholder="From Date"  formControlName="fromDate"
                          [min]="minDate"  (dateChange)="formStartReg.get('toDate')?.setValue(null);handleToDate($event)">
                        <mat-datepicker-toggle matSuffix [for]="$any(picker)"></mat-datepicker-toggle>
                        <ngx-mat-datetime-picker #picker  [showSpinners]="showSpinners" [showSeconds]="showSeconds"
                          [stepHour]="stepHour" [stepMinute]="stepMinute" [stepSecond]="stepSecond" [touchUi]="touchUi" [showSeconds]="true"
                          [color]="color" [enableMeridian]="enableMeridian" >
                        </ngx-mat-datetime-picker>
                        <mat-error
                        *ngIf="formStartReg.controls['fromDate'].hasError('required')">
                        Please select From Date
                      </mat-error>
                      </mat-form-field>
                <!-- <mat-form-field class="d-block mt-3">
                    <mat-label>From Date:</mat-label>
                    <input matInput [matDatepicker]="picker1"  [min]="maxDate" formControlName="fromDate"
                        placeholder="From Date" (dateChange)="handleToDate($event)">
                    <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                    <mat-datepicker-toggle matSuffix (click)="clearFromDate()">
                        <mat-icon matDatepickerToggleIcon>clear</mat-icon>
                    </mat-datepicker-toggle>
                    <mat-datepicker #picker1></mat-datepicker>
                    <mat-error
                    *ngIf="formStartReg.controls['fromDate'].hasError('required') || formStartReg.controls['fromDate'].dirty || formStartReg.controls['fromDate'].value || formStartReg.controls['fromDate'].touched">
                    Please select From Date
                  </mat-error>
                    </mat-form-field> -->
                </div>
                <div class="col-md-12">
                    <mat-form-field class="d-block mt-3">
                        <mat-label>To Date</mat-label>
                        <input matInput [ngxMatDatetimePicker]="picker1" placeholder="To Date"  formControlName="toDate"
                        [min]="minimumDate()"  >
                        <mat-datepicker-toggle matSuffix [for]="$any(picker1)"></mat-datepicker-toggle>
                        <ngx-mat-datetime-picker #picker1 [showSpinners]="showSpinners" [showSeconds]="showSeconds"
                          [stepHour]="stepHour" [stepMinute]="stepMinute" [stepSecond]="stepSecond" [touchUi]="touchUi" [showSeconds]="true"
                          [color]="color" [enableMeridian]="enableMeridian">
                        </ngx-mat-datetime-picker>
                      </mat-form-field>
                    <!-- <mat-form-field class="d-block mt-3">
                        <mat-label>To Date:</mat-label>
                        <input matInput [matDatepicker]="picker2" readonly [min]="minimumDate()" formControlName="toDate"
                          placeholder="To Date">
                        <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                        <mat-datepicker-toggle matSuffix (click)="clearToDate()">
                          <mat-icon matDatepickerToggleIcon>clear</mat-icon>
                      </mat-datepicker-toggle>
                        <mat-datepicker #picker2></mat-datepicker>
                      </mat-form-field> -->
                </div>
                <div class="col-md-12 mb-3">
                  <mat-form-field class="d-block">
                    <mat-label>Remarks</mat-label>
                    <textarea matInput formControlName="remarks"></textarea>
                    <mat-error
                    *ngIf="formStartReg.controls['remarks'].hasError('required')">
                    Please Enter the remark.
                  </mat-error>
                  </mat-form-field>
                    <!-- <mat-form-field class="d-block mt-3">
                        <mat-label>To Date:</mat-label>
                        <input matInput [matDatepicker]="picker2" readonly [min]="minimumDate()" formControlName="toDate"
                          placeholder="To Date">
                        <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                        <mat-datepicker-toggle matSuffix (click)="clearToDate()">
                          <mat-icon matDatepickerToggleIcon>clear</mat-icon>
                      </mat-datepicker-toggle>
                        <mat-datepicker #picker2></mat-datepicker>
                      </mat-form-field> -->
                </div>
              </div>
        </div>
        <div class="col-md-4"></div>
       </div> 

      <div class="text-center mt-2">
        <button class="btn btn-success btn-sm" type="submit">{{isEdit?'Update':'Create'}}</button>
        <button class="btn btn-danger btn-sm ml-1" type="button" (click)="reset()">Reset</button>
      </div>

      </form>  
    </div>
</div>        
<div class="container-fluid reg-page-bg pl-4 pr-4 mt-2">
    <div class="" >
      <div class="row justify-content-between">

      </div>
      <div class="table-responsive">
        <table class="table mt-2 text-left pe-2 table-bordered table-sm">
            <tr>
              <th style="border-top-left-radius: 0;border-bottom-left-radius: 0;">S.No.</th>
              <th>Survey Year</th>
              <th>From Date</th>
              <th>To Date</th>
              <th>Status</th>
              <th>Remarks</th>
              <th>Action</th>
            </tr>

          <ng-container *ngFor="
          let data of userDataTable
            
            | paginate
              : {
                  itemsPerPage: pageSize,
                  currentPage: page
                };
          let i = index
        ">
            <tr [ngClass]="data.addClass">
              <td>{{i+1}}</td>
              <td>{{ data.surveyYearFY }}</td>
              <td>{{ data.startDateString }}</td>
              <td>{{ data.endDateString }}</td>
              <td >{{data.status}}</td>
              <td>{{data.remarks}}</td>
              <td>
               
                <mat-icon class="edit_icon" *ngIf="data.addClass!='red'" matTooltip="Edit"  (click)="edit(data)"> edit </mat-icon>
                <mat-icon class="delete_icon" matTooltip="Delete" (click)="delete(data.id)" *ngIf="data.addClass === ''">delete_forever</mat-icon>
              </td>
            </tr>
          </ng-container>
        </table>
      </div>


    </div>
</div>