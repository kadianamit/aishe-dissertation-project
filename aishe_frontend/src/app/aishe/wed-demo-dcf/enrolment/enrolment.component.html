<div class="container-fluid reg-page-bg pl-4 pr-4">
  <h2 class="custom-header header-top">Common Data For One Nation One Data</h2>
  <div class="form-group">
    <div class="form-row mr-0 ml-0">
      <div class="col-md-12 mt-0 badges p-2 mt-3">
        <div class="float-left">
          <span class="font-weight-bold text-lg font1">Student Enrolment</span>
        </div>
        <div class="float-right" *ngIf="instituteName">
          <span class="font-weight-bold text-lg font1">{{instituteName}} ({{aisheCode}})</span>
        </div>
      </div>
    </div>
  </div>
 
  <div class="animated fadeInDown card mb-2 pt-2 pb-1 bg-light overflow-hidden">
    
    <div class="row col-md-12 overflow-hidden">
      <div class="col-md-2 pt-4">
        <label>Show</label>&nbsp;
        <select [(ngModel)]="pageSize" (ngModelChange)="onChange($event)">
          <option *ngFor="let data of sharedService.pageSizeOptions" [value]="data">{{data}}</option>
        </select>
        entries
      </div>
      
      
      
     
      <div class="col-md-4">
        <!-- <button mat-button class="btn btn-success btn-sm  mt-2" matTooltip="Search" (click)="getBoolean()">
          <i class="fa fa-search" aria-hidden="true"></i>
        </button> -->
      </div>
      <div class="col-md-6 pt-4">
        <label>Search:</label>&nbsp;
        <input type="text" size="30" id='myInput' (change)="updateResults()" (keyup)="updateResults()"
          [(ngModel)]="searchText">
      </div>


    </div>
    <div class="row col-md-12 overflow-hidden">
      <div class="col-md-2">
        <mat-form-field class="d-block">
          <mat-label>Mode</mat-label>
          <mat-select [(ngModel)]="modeId" (selectionChange)="getBoolean()">
            <mat-option *ngFor="let item of modeList;" [value]="item.id">{{item.name}}</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <!-- <div class="col-md-2">
        <mat-form-field class="d-block">
          <mat-label>Name</mat-label>
          <mat-select (selectionChange)="allFilter($event.value)" [(ngModel)]="employeeName"
            [ngModelOptions]="{standalone: true}" placeholder="Name">
            <mat-select-filter [array]="variables3" [displayMember]="'name'"
              (filteredReturn)="filterEmployeeList = $event"></mat-select-filter>
            <mat-option *ngFor="let x of filterEmployeeList" [value]=x.name>
              {{x.name}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div> -->

      <div class="col-md-3">
        <mat-form-field class="d-block">
          <mat-label>Faculty/School:</mat-label>
          <mat-select (selectionChange)="allFilter($event)" [(ngModel)]="facultyName"
            [ngModelOptions]="{standalone: true}" placeholder="Faculty/School">
            <mat-select-filter [array]="variables4" [displayMember]="'facultyName'"
              (filteredReturn)="filterFacultyList = $event"></mat-select-filter>
            <mat-option *ngFor="let x of filterFacultyList" [value]=x.facultyName>
              {{x.facultyName}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="col-md-3">
        <mat-form-field class="d-block">
          <mat-label>Department/Centre:</mat-label>
          <mat-select (selectionChange)="allFilter($event)" [(ngModel)]="departmentName"
            [ngModelOptions]="{standalone: true}" placeholder="Department/Centre">
            <mat-select-filter [array]="variables5" [displayMember]="'departmentName'"
              (filteredReturn)="filterDepartmentList = $event"></mat-select-filter>
            <mat-option *ngFor="let x of filterDepartmentList" [value]=x.departmentName>
              {{x.departmentName}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-md-3">
        <mat-form-field class="d-block">
          <mat-label>Level:</mat-label>
          <mat-select (selectionChange)="allFilter($event.value)" [(ngModel)]="dropdownLevel"
            [ngModelOptions]="{standalone: true}" placeholder="Level">
            <mat-select-filter [array]="variables10" [displayMember]="'levelName'"
              (filteredReturn)="levelFilter = $event"></mat-select-filter>
            <mat-option *ngFor="let x of levelFilter" [value]=x.levelName>
              {{x.levelName}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-md-3">
        <mat-form-field class="d-block">
          <mat-label>Programe:</mat-label>
          <mat-select (selectionChange)="allFilter($event.value)" [(ngModel)]="dropdownProgramName"
            [ngModelOptions]="{standalone: true}" placeholder="Programe">
            <mat-select-filter [array]="variables7" [displayMember]="'programName'"
            (filteredReturn)="programmeList = $event"></mat-select-filter>
            <mat-option *ngFor="let x of programmeList" [value]=x.programName>
              {{x.programName}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-md-3">
        <mat-form-field class="d-block">
          <mat-label>Broad Discipline Group Category:</mat-label>
          <mat-select (selectionChange)="allFilter($event.value)" [(ngModel)]="dropdownBoardCategory"
            [ngModelOptions]="{standalone: true}" placeholder="Broad Discipline Group Category">
            <mat-select-filter [array]="variables8" [displayMember]="'boardCategory'"
            (filteredReturn)="boardCatorgryFilter = $event"></mat-select-filter>
            <mat-option *ngFor="let x of boardCatorgryFilter" [value]=x.boardCategory>
              {{x.boardCategory}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-md-3">
        <mat-form-field class="d-block">
          <mat-label>Broad Discipline Group Name:</mat-label>
          <mat-select (selectionChange)="allFilter($event.value)" [(ngModel)]="dropdownBoardName"
            [ngModelOptions]="{standalone: true}" placeholder="Broad Discipline Group Name">
            <mat-select-filter [array]="variables9" [displayMember]="'boardName'"
            (filteredReturn)="boardNameFilter = $event"></mat-select-filter>
            <mat-option *ngFor="let x of boardNameFilter" [value]=x.boardName>
              {{x.boardName}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <div class="col-md-1">
        <button mat-button class="btn btn-sm btn-primary d-block mt-3" (click)="reload()" matTooltip="Refresh">
          <i class="fa fa-refresh" aria-hidden="true"></i>
        </button>
      </div>
    </div>


    <div class="col-md-12 table-responsive">
      <table class="table table-bordered table-sm table-hover exam">
        <tr>
          <th>S.No.</th>
          <th *ngIf="mode === 6">Regional Centre</th>
          <th *ngIf="mode === 4">Off Campus</th>
          <th *ngIf="showInUniv">Faculty/School</th>
          <th *ngIf="showInUniv">Department/Centre</th>
          <th>Level</th>
          <th>Name of the Programme</th>
          <th>Broad Discipline Group Category</th>
          <th>Broad Discipline Group Name</th>
          <th>Discipline</th>
          <th colspan="2" class="text-center">
        <tr>
          <th class="durationYear">Year</th>
          <th class="durationMonth">Month</th>
        </tr>

        </th>
        <!-- <th colspan="3" class="text-center">Total
          <tr>
            <th class="durationYear">Male</th>
            <th class="durationMonth">Female</th>
            <th class="durationMonth">Transgender</th>
          </tr>
          
          </th> -->
        <th>Male</th>
        <th>Female</th>
        <th>Transgender</th>
        <!-- <th>Action</th> -->

        </tr>
        <ng-container *ngFor="let data of enrollData | paginate : {
                            itemsPerPage: pageSize,
                            currentPage: page
                          };
                    let i = index
                  ">
          <tr>
            <td>{{i+StartLimit+1}}</td>
            
            <td *ngIf="mode === 6">{{data.regionalCentreName}}</td>
            <td *ngIf="mode === 4">{{data.offCampusName}}</td>
            <td *ngIf="showInUniv">{{data.facultyName?data.facultyName:'No Faculty'}}</td>
            <td *ngIf="showInUniv">{{data.deptName?data.deptName:'No Department'}}</td>
            <td>{{data.levelName}}</td>
            <td>{{data.programme}}</td>
            <td>{{data.disciplineGroupCategory}}</td>
            <td>{{data.disciplineGroupDiscipline}}</td>
            <td>{{data.discipline}}</td>
            <td class="widthHeader">{{data.levelId === '1'?'':((data.levelId === '8' && (data.programmeId === '216' || data.programmeId === '217' || data.programmeId === '086'))?'':data.year)}}</td>
            <td class="widthHeader">{{data.levelId === '1'?'':((data.levelId === '8' && (data.programmeId === '216' || data.programmeId === '217' || data.programmeId === '086'))?'':data.month)}}</td>
            <td>{{data.totalMale}}</td>
            <td>{{data.totalFemale}}</td>
            <td>{{data.totalTransgender}}</td>
            <!-- <td>
              
              <mat-icon class="view_icon" matTooltip="View" (click)="viewData(data)">
                remove_red_eye</mat-icon>
            </td> -->
        </ng-container>
        <p *ngIf="enrollData.length === 0" style="color: red;">No Records</p>
      </table>
      <div class="row col-md-12 overflow-hidden" *ngIf="enrollData.length !== 0">
        <div class="col-md-3">
          Showing {{StartLimit + 1}} to {{pageData === -1?0:pageData}} Of {{enrollData.length}} entries
        </div>
        <div class="col-md-3"></div>
        <div class="col-md-6">
          <pagination-controls previousLabel="Prev" nextLabel="Next" (pageChange)="handlePageChange($event)"
            screenReaderPaginationLabel="Pagination" screenReaderPageLabel="page"
            screenReaderCurrentLabel="You're on page"></pagination-controls>
        </div>
      </div>
    </div>
    <div class="col-md-8 offset-lg-2 table-responsive pb-4" *ngIf="enrollData.length !== 0">
      <table class="table table-sm table-bordered changeBck">
        <tr>
          <th></th>
          <th>Male</th>
          <th>Female</th>
          <th>Transgender</th>
          <th>Total</th>
          

        </tr>
        <tr>
          <td style="font-weight: 500;">Total Enrolment Including EWS</td>
          <td>{{totalMales}}</td>
          <td>{{totalFemales}}</td>
          <td>{{totalTransgender}}</td>
          <td>{{totalStudent}}</td>
        </tr>
        <tr>
          <td style="font-weight: 500;">Total Enrolment Excluding EWS</td>
          <td>{{totalMalesEx}}</td>
          <td>{{totalFemaleEx}}</td>
          <td>{{totalTransgenderEx}}</td>
          <td>{{totalEnrolEWSEx}}</td>
        </tr>
      </table>
      
    </div>
    </div>
    </div>
    

