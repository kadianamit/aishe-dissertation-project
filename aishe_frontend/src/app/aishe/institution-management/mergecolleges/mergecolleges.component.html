
<!-- ----------------college module--------------------------- -->
<div class="container-fluid reg-page-bg pl-4 pr-4">



    <div class="" *ngIf="showTable">
      <div class="row justify-content-between">
        <div class="col-auto show-button" >
          <label>Show</label>&nbsp;
          <select (ngModelChange)="onChange($event)" [(ngModel)]="pageSize">
            <option *ngFor="let data of tableSize" [value]="data">
              {{ data }}
            </option>
          </select>
          entries
        </div>

        <div class="col-auto ml-4">
          <label>Search:</label>&nbsp;
          <input id="myInput" type="text" [(ngModel)]="searchText" />
        </div>
      </div>
      <div class="table-responsive">
        <table class="table mt-2 text-left pe-2">
          <thead>
            <tr>
              <th>AISHE Code</th>
              <th>College Name</th>
             
              <th>College Type</th>

              <th>State</th>
              <th>District</th>
              <th>University Name</th>
              <th>Deafiliation Reason</th>
              <th>Action</th>

            </tr>
          </thead>
          <tbody id="myTable">
            <tr
              *ngFor="
                let data of userDataTable
                  | searchFilter : searchText
                  | paginate
                    : {
                        itemsPerPage: pageSize,
                        currentPage: page
                      };
                let i = index
              "
            >
            <td>C-{{ data.id }}</td>
              <td style="width: 26%">{{ data.collegeName }}</td>
              
              <td>{{ data.collegeType }}</td>

              <td>{{ data.stateName }}</td>

              <td>{{ data.districtName }}</td>
              <td>{{ data.universityName }}</td>
              <td>{{data.reasonName}}</td>

              <td>
                <!-- <mat-checkbox [checked]="checked" (change)="checkBox($event,data)"></mat-checkbox> -->
                <!-- <input type="checkbox" [checked]="" class="chec" #checkboxes (change)="checkBox($event,data)" id={{data.id}} > -->
                <mat-checkbox (change)="checkBox($event,data)" id={{data.id}} [checked]="toggleCheckBox(data.id)">
                 
              </mat-checkbox>

              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="col-md-3" *ngIf="showTable">
        Showing {{ StartLimit + 1 }} to {{ pageData }} Of
        {{ userDataTable.length }} entries
      </div>
<div class="even-columns"
>
      <button *ngIf="selectedColleges.length >1"  (click)="merge()" id="save"  class="btn1" style="margin: 1.0% 0;width:8%">Merge</button>
      <button *ngIf="userDataTable.length>0 && selectedColleges.length>0" id="save"  class="btn1 btn2" style="margin: 1.0% 0;width:8%" (click)="resetCheckbox()" >Reset</button>
    </div>
      <div class="d-flex justify-content-center" *ngIf="showTable">
        <pagination-controls
          previousLabel="Prev"
          nextLabel="Next"
          (pageChange)="handlePageChange($event)"
        >
        </pagination-controls>
        <!-- <div class="row col-md-12 overflow-hidden">
            <div class="col-md-3">
              Showing {{StartLimit + 1}} to {{pageData}} Of {{userData.length}} entries
            </div>

             <div class="col-md-6">
                  <pagination-controls maxsize="12" previousLabel="Prev" nextLabel="Next"

                    screenReaderPaginationLabel="Pagination" screenReaderPageLabel="page"
                    screenReaderCurrentLabel="You're on page"></pagination-controls>
                </div>
          </div> -->
      </div>
      <!--  -->
    </div>


  <!--Merge Form -->

  <div class="container-fluid reg-page-bg pl-4 pr-4" *ngIf="showMergeTable" style="margin-top: 5%;">
    <mat-card>
      <div class="row">

        <div class="col-2 d-flex justify-content-between align-items-center">
          <h1 class="insthead position-relative mb-md-4"><span>Merge College</span></h1>


        </div>

        <div class="col-2 d-flex justify-content-end mt-2 ml-auto">
          <a (click)="backClicked()" matTooltip="Back" style="cursor: pointer;" class="text-uppercase"><img src="assets/img/table-back.svg"
            class="table-back me-2" />
            Back
          </a>
        </div>
      </div>
      <mat-card-content>
        <div class="row" style="margin: 0 0 1%; border-bottom: 3px solid #a7a79f;">

        </div>
        <form [formGroup]="form" (ngSubmit)="submit()" >

          <div class="animated fadeIn">
            <ng-container >
              <h1 class="insthead position-relative mb-md-2"><span>Merging Colleges List</span></h1>
              <table   >

                <tbody class="my-table body" *ngFor="let data of selectedColleges">

                    <td>C-{{data.id}}</td>
                    <td>{{data.collegeName}}</td>

                </tbody>
              </table>
            </ng-container>
            <div class="row" style="margin-top: 2%;">
              <div class="col-4">
                <mat-form-field appearance="fill">
                  <mat-label>Survey Year</mat-label>
                  <mat-select   formControlName="surveyYearValue" (selectionChange)="getState()">
                    <mat-option *ngFor="let year of surveyYearList" [value]="year">{{year}}</mat-option>


                  </mat-select>
                </mat-form-field>
                <mat-error *ngIf="(form.controls['surveyYearValue'].hasError('required')&& submitted)">It is required field</mat-error>
              </div>

                  <div class="col-4">
                    <mat-form-field class="example-form-field">
                      <mat-label>College Name</mat-label>
                      <input matInput type="text" [(ngModel)]="collegeName" formControlName="collegeName"  [ngClass]="{ 'is-invalid': submitted && f['collegeName'].errors }">

                    </mat-form-field>
                    <mat-error *ngIf="((form.controls['collegeName'].hasError('required') ||form.controls['collegeName'].hasError('whitespace')) && submitted)">It is required field</mat-error>
                  </div>

                  <div class="col-4">
                    <mat-form-field>
                    <mat-select [disableOptionCentering]="true" #select1 placeholder="College Type" [compareWith]="compareFn" formControlName="collegeType"  [ngClass]="{ 'is-invalid': submitted && f['collegeType'].errors }">
                      <mat-select-filter *ngIf="select1.focused" [array]="collegeTypeData" (filteredReturn)="filteredcollegeTypeData =$event" [displayMember]="'type'"></mat-select-filter>
                      <mat-option *ngFor="let item of filteredcollegeTypeData" [value]="item">
                        {{item.type}}
                      </mat-option>
                    </mat-select>

                  </mat-form-field>
                  <mat-error *ngIf="(form.controls['collegeType'].hasError('required')&& submitted)">It is required field</mat-error>
                    </div>

                    <div class="col-4">

                      <mat-form-field appearance="fill">
                        <mat-select [disableOptionCentering]="true" #select2 placeholder="State" [compareWith]="compareFn"  formControlName="stateName" (selectionChange)="loadUniversityData()"  [ngClass]="{ 'is-invalid': submitted && f['stateName'].errors }">
                          <mat-select-filter *ngIf="select2.focused" [array]="userData" (filteredReturn)="filteredState =$event" [displayMember]="'name'"></mat-select-filter>
                          <mat-option *ngFor="let item of filteredState " [value]="item">
                            {{item.name}}
                          </mat-option>
                        </mat-select>

                      </mat-form-field>
                      <mat-error *ngIf="(form.controls['stateName'].hasError('required')&& submitted)">It is required field</mat-error>
                    </div>
                    <div class="col-4" *ngIf="roleId === '26' || roleId==='1'">
                      <mat-form-field appearance="fill">
                        <mat-label>University Name</mat-label>
                        <mat-select [disableOptionCentering]="true" #select3 formControlName="universityType">
                          <mat-select-filter *ngIf="select3.focused"
                            [array]="UniversityList"
                            (filteredReturn)="filteredUniversityList = $event"
                            [displayMember]="'name'"
                          ></mat-select-filter>
                          <mat-option
                            *ngFor="let university of filteredUniversityList"
                            [value]="university"
                          >
                            {{ university.name }}
                          </mat-option>
                        </mat-select>
                      </mat-form-field>
                      <mat-error *ngIf="(form.controls['universityType'].hasError('required')&& submitted)">It is required field</mat-error>
                    </div>




                  <div class="col-4">
                    <mat-form-field>
                      <mat-select [disableOptionCentering]="true" #select4 placeholder="District"  [compareWith]="compareFn" formControlName="districtName"  [ngClass]="{ 'is-invalid': submitted && f['districtName'].errors }">
                        <mat-select-filter *ngIf="select4.focused" [array]="dataDistrict" (filteredReturn)="filteredDistrict =$event" [displayMember]="'name'"></mat-select-filter>
                        <mat-option *ngFor="let item of filteredDistrict" [value]="item">
                          {{item.name}}
                        </mat-option>
                      </mat-select>

                    </mat-form-field>
                    <mat-error *ngIf="(form.controls['districtName'].hasError('required')&& submitted)">It is required field</mat-error>
                  </div>
                  <div class="col-4">
                    <mat-form-field>
                      <mat-select [disableOptionCentering]="true" #select5 placeholder="Management Type" [compareWith]="compareFn" formControlName="managementType" [ngClass]="{ 'is-invalid': submitted && f['managementType'].errors }">
                        <mat-select-filter *ngIf="select5.focused" [array]="managmentData" (filteredReturn)="filteredmanagementT =$event" [displayMember]="'management'"></mat-select-filter>
                        <mat-option *ngFor="let item of filteredmanagementT" [value]="item">
                          {{item.management}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-error *ngIf="(form.controls['managementType'].hasError('required')&& submitted)">It is required field</mat-error>
                  </div>

                  <div class="col-4">
                    <mat-form-field>
                      <mat-select  placeholder="Location"  formControlName="location" [ngClass]="{ 'is-invalid': submitted && f['location'].errors }">
                        <!-- <mat-select-filter *ngIf="select5.focused" [array]="managmentData" (filteredReturn)="filteredmanagementT =$event" [displayMember]="'managementType'"></mat-select-filter> -->
                        <mat-option *ngFor="let item of locationData" [value]="item.id">
                          {{item.name}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                    <mat-error *ngIf="(form.controls['location'].hasError('required')&& submitted)">It is required field</mat-error>
                  </div>

                  <div class="col-4">
                    <mat-form-field class="example-full-width">
                      <mat-label>Remarks</mat-label>
                      <textarea matInput formControlName="remarks"  [ngClass]="{ 'is-invalid': submitted || f['remarks'].errors }"></textarea>
                      <span *ngIf="(( submitted || f['remarks'].touched) && f['remarks'].errors)" >
                        <span class="validation" *ngIf="f['remarks'].errors['required']||f['remarks'].errors['whitespace']">Remarks is required</span>
                        <span class="validation" *ngIf="f['remarks'].errors['maxlength']"  style="color: #d50404;">Maximum length is 2000</span>
                        <span class="validation" *ngIf="f['remarks'].errors['minlength']"  style="color: #d50404;">Minimum length is 3</span>
                      </span>
                    </mat-form-field>
                  </div>
                 <div class="col-6">
                    <mat-checkbox  formControlName="isDCFApplicable" class="checkbox">Is DCF Applicable</mat-checkbox>
                    <!-- <mat-error *ngIf="(form.controls['isDCFApplicable'].hasError('required')&& submitted)">It is required field</mat-error> -->
               </div>
            </div>
          </div>


          <!--26 Nov Start-->
          <div class="d-flex .justify-content-center" style="margin: 2% 0px;">
            <button id="save"  type="submit" class="btn1" style="margin: 1.0% 0; width:8%;">
              SAVE
            </button>
            <button id="cancel" type="button" (click)="backClicked()" class="btn2 btn1" style="margin: 1.0%;width: 8%;
            background-color: #d50404;">Cancel</button>
          </div>


        </form>
      </mat-card-content>
    </mat-card>

  </div>
  </div>


  <!---University-->
  <div class="container-fluid reg-page-bg pl-4 pr-4" *ngIf="roleId==='aac7'|| roleId==='43526'">
    <div *ngIf="showTable" class="container-fluid reg-page-bg pl-4 pr-4">

      <div class="row justify-content-between">
        <div class="col-auto show-button" *ngIf="showTable">
          <label>Show</label>&nbsp;
          <select (ngModelChange)="onChange($event)" [(ngModel)]="pageSize">
            <option *ngFor="let data of tableSize" [value]="data">
              {{ data }}
            </option>
          </select>
          entries
        </div>

        <div class="col-auto ml-4" *ngIf="showTable">
          <label>Search:</label>&nbsp;
          <input id="myInput" type="text" [(ngModel)]="searchText" />
        </div>
      </div>
      <div class="table-responsive">
        <table class="table mt-2 text-left pe-2">
          <thead>
            <tr>
              <th>University Name</th>
              <th>College Name</th>
              <th>AISHE Code</th>
              <th>College Type</th>
              <th>Management Type</th>
              <th>State</th>
              <th>District</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody id="myTable">
            <tr
              *ngFor="
                let data of userDataTable
                  | searchFilter : searchText
                  | paginate
                    : {
                        itemsPerPage: pageSize,
                        currentPage: page
                      };
                let i = index
              "
            >
              <td>{{ data.universityName }}</td>
              <td style="width: 26%">{{ data.collegeName }}</td>
              <td>C-{{ data.id }}</td>
              <td>{{ data.collegeType }}</td>
              <td>{{ data.managementType }}</td>


              <td>{{ data.stateName }}</td>

              <td>{{ data.districtName }}</td>

              <td>
                <div class="piped d-flex">
                  <a   matTooltip="Edit Info"
                    (click)="merge()"
                  >
                    <mat-icon class="edit_icon1"> edit </mat-icon>
                  </a>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="col-md-3" *ngIf="showTable">
        Showing {{ StartLimit + 1 }} to {{ pageData }} Of
        {{ userDataTable.length }} entries
      </div>
      <div class="d-flex justify-content-center" *ngIf="showTable">
        <pagination-controls
          previousLabel="Prev"
          nextLabel="Next"
          (pageChange)="handlePageChange($event)">
        </pagination-controls>

      </div>
     </div>


  </div>


