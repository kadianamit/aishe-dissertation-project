<!-- ----------------college module--------------------------- -->
<div class="container-fluid reg-page-bg pl-4 pr-4">
    <div class="" *ngIf="showTable">
        <div class="row justify-content-between">
            <div class="col-auto show-button">
                <label>Show</label>&nbsp;
                <select (ngModelChange)="onChange($event)" [(ngModel)]="pageSize">
          <option *ngFor="let data of tableSize" [value]="data">
            {{ data }}
          </option>
        </select> entries
            </div>

            <div class="col-auto ml-4">
                <label>Search:</label>&nbsp;
                <input id="myInput" type="text" [(ngModel)]="searchText" />
            </div>
        </div>
        <div class="table-responsive">
            <table class="table mt-2 text-left pe-2">
                <thead>
                    <tr>
                        <th>AISHE Code</th>
                        <th>College Name</th>
                        <th>College Type</th>
                        <th>Management Type</th>
                        <th>State</th>
                        <th>District</th>
                        <th>University Name</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="myTable">
                    <tr *ngFor="
              let data of userDataTable
                | searchFilter : searchText
                | paginate
                  : {
                      itemsPerPage: pageSize,
                      currentPage: page
                    };
              let i = index
            ">



                        <td>C-{{ data.id }}</td>
                        <td style="width: 26%">{{ data.collegeName }}</td>
                        <td>{{ data.collegeType }}</td>
                        <td>{{data.managementType}}</td>
                        <td>{{ data.stateName }}</td>

                        <td>{{ data.districtName }}</td>
                        <td>{{ data.universityName }}</td>
                        <!-- <td>{{ data.location }}</td> -->
                        <td>
                            <div class="piped d-flex">
                                <a matTooltip="Edit Info" (click)="editUser(data)">
                                    <mat-icon class="edit_icon1"> edit </mat-icon>
                                </a>

                                &nbsp;
                                <!-- <span *ngIf="!data.isEditable"></span>
                <a
                  (click)="editUser(data)"
                  matTooltip="De-Affiliate"
                  routerLink="deAffiliate"
                >
                  <img
                    src="https://demo.he.nic.in/aishe/images/de-affliate.png"
                    style="background-color: #acb7acd9; border-radius: 47%"
                  />
                </a> -->
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="col-md-3" *ngIf="showTable">
            Showing {{ StartLimit + 1 }} to {{ pageData }} Of {{ userDataTable.length }} entries
        </div>
        <div class="d-flex justify-content-center" *ngIf="showTable">
            <pagination-controls previousLabel="Prev" nextLabel="Next" (pageChange)="handlePageChange($event)">
            </pagination-controls>
            <!-- <div class="row col-md-12 overflow-hidden">
          <div class="col-md-3">
            Showing {{StartLimit + 1}} to {{pageData}} Of {{userData.length}} entries
          </div>

           <div class="col-md-6">
                <pagination-controls maxsize="12" previousLabel="Prev" nextLabel="Next"

                  screenReaderPaginationLabel="Pagination" screenReaderPageLabel="page"
                  screenReaderCurrentLabel="You're on page"></pagination-controls>
              </div>
        </div> -->
        </div>
        <!--  -->
    </div>


    <!--Edit Form -->
    <div class="container-fluid reg-page-bg pl-4 pr-4" *ngIf="showEditTables" style="margin-top: 5%;">
        <mat-card>
            <div class="row">
                <!-- <mat-card-title>Edit College</mat-card-title> -->
                <div class="col-10 d-flex justify-content-between align-items-center">
                    <h1 class="insthead position-relative mb-md-4"><span>Edit College</span></h1>


                </div>
                <div class="col-2 d-flex justify-content-end mt-2 ml-auto">
                    <a (click)="backClicked()" matTooltip="Back" style="cursor: pointer;" class="text-uppercase"><img src="assets/img/table-back.svg" class="table-back me-2" /> Back
                    </a>
                </div>
            </div>
            <mat-card-content>
                <div class="row" style="margin: 0 0 4%; border-bottom: 3px solid #a7a79f;">
                    <div class="col-sm-1">
                        <label class="form-label editLabel">Survey Year</label>
                        <p style="width: max-content;">{{surveyYear1}}</p>
                    </div>
                    <div class="col-sm-1">
                        <label class="form-label editLabel">AISHE Code</label>
                        <p style="width: max-content;">C-{{id}}</p>
                    </div>
                    <div class="col-sm-2">
                        <label class="form-label editLabel">College Name</label>
                        <p>{{collegeName1}}</p>
                    </div>

                    <div class="col-sm-2">
                        <label class="form-label editLabel">College Type</label>
                        <p>{{collegeType}}</p>
                    </div>
                    <div class="col-sm-2">
                        <label class="form-label editLabel">Management Type</label>
                        <p>{{managementType}}</p>
                    </div>
                    <div class="col-sm-2">
                        <label class="form-label editLabel">State</label>
                        <p>{{stateName}}</p>
                    </div>
                    <div class="col-sm-2">
                        <label class="form-label editLabel">District</label>
                        <p>{{districtName}}</p>
                    </div>
                    <!-- <div class="col-sm-2">
          <label class="form-label editLabel">Location</label>
          <p>{{locationEdit}}</p>
        </div> -->
                </div>
                <form [formGroup]="form" (ngSubmit)="submit()">
                    <div class="animated fadeIn">

                        <div class="row" style="margin-top: 6%;">

                            <div class="col-3 mb-2 p-1">
                                <mat-form-field class="example-form-field">
                                    <mat-label>Survey Year</mat-label>
                                    <mat-select [disableOptionCentering]="true" formControlName="surveyYearValue" required>
                                        <mat-option *ngFor="let year of surveyYearList" [value]="year">{{ year }}</mat-option>
                                    </mat-select>
                                    <!-- <mat-error>Survey Year is required</mat-error> -->
                                </mat-form-field>

                            </div>
                            <div class="col-3 mb-2 p-1">
                                <mat-form-field class="example-form-field">
                                    <mat-label>College Name</mat-label>
                                    <input matInput type="text" (keypress)="alphaNumberOnly($event)" formControlName="collegeName" [ngClass]="{ 'is-invalid': submitted && f['collegeName'].errors }">
                                    <div *ngIf="submitted && f['collegeName'].errors" class="invalid-feedback">
                                        <div *ngIf="f['collegeName'].errors['required']||f['collegeName'].errors['whitespace']">College Name is required</div>
                                    </div>

                                </mat-form-field>
                            </div>

                            <div class="col-3 mb-2 p-1">
                                <mat-form-field>
                                    <mat-select [disableOptionCentering]="true" #select1 placeholder="College Type" [compareWith]="compareFn" formControlName="collegeType" [ngClass]="{ 'is-invalid': submitted && f['collegeType'].errors }">
                                        <mat-select-filter *ngIf="select1.focused" [array]="collegeTypeData" (filteredReturn)="filteredcollegeTypeData =$event" [displayMember]="'type'"></mat-select-filter>
                                        <mat-option *ngFor="let item of filteredcollegeTypeData" [value]="item.type">
                                            {{item.type}}
                                        </mat-option>
                                    </mat-select>
                                    <div *ngIf="submitted && f['collegeType'].errors" class="invalid-feedback">
                                        <div *ngIf="f['collegeType'].errors['required']">College Type is required</div>
                                    </div>
                                </mat-form-field>
                            </div>
                            <div class="col-3 mb-2 p-1">

                                <mat-form-field>
                                    <mat-select [disableOptionCentering]="true" #select2 placeholder="State" [compareWith]="compareFn" formControlName="stateName" (selectionChange)="getdistrictName();districtfilter()" [ngClass]="{ 'is-invalid': submitted && f['stateName'].errors }">
                                        <mat-select-filter *ngIf="select2.focused" [array]="userData" (filteredReturn)="filteredState =$event" [displayMember]="'name'"></mat-select-filter>
                                        <mat-option *ngFor="let item of filteredState " [value]="item.name">
                                            {{item.name}}
                                        </mat-option>
                                    </mat-select>
                                    <div *ngIf="submitted && f['stateName'].errors" class="invalid-feedback">
                                        <div *ngIf="f['stateName'].errors['required']">State Name is required</div>
                                    </div>
                                </mat-form-field>
                            </div>



                            <div class="col-3 mb-2 p-1">
                                <mat-form-field>
                                    <mat-select [disableOptionCentering]="true" #select3 placeholder="District" [compareWith]="compareFn" formControlName="districtName" [ngClass]="{ 'is-invalid': submitted && f['districtName'].errors }">
                                        <mat-select-filter *ngIf="select3.focused" [array]="dataDistrict" (filteredReturn)="filteredDistrict =$event" [displayMember]="'name'"></mat-select-filter>
                                        <mat-option *ngFor="let item of filteredDistrict" [value]="item.name">
                                            {{item.name}}
                                        </mat-option>
                                    </mat-select>
                                    <div *ngIf="submitted && f['districtName'].errors" class="invalid-feedback">
                                        <div *ngIf="f['districtName'].errors['required']">District Name is required</div>
                                    </div>
                                </mat-form-field>
                            </div>
                            <!-- <div class="col-3">
                  <mat-form-field>
                    <mat-select placeholder="Location" [compareWith]="compareFn"  formControlName="location" [ngClass]="{ 'is-invalid': submitted && f['location'].errors }"> -->
                            <!-- <mat-select-filter *ngIf="select4.focused"  [array]="managmentData" (filteredReturn)="filteredmanagementT =$event" [displayMember]="'managementType'"></mat-select-filter> -->
                            <!-- <mat-option *ngFor="let item of locationData" [value]="item.name">
                        {{item.name}}
                      </mat-option>
                    </mat-select>
                    <div *ngIf="submitted && f['location'].errors" class="invalid-feedback">
                      <div *ngIf="f['location'].errors['required']">Location is required</div>
                    </div>
                  </mat-form-field>
                </div> -->
                            <div class="col-3 mb-2 p-1">
                                <mat-form-field>
                                    <mat-select [disableOptionCentering]="true" #select4 placeholder="Management Type" [compareWith]="compareFn" formControlName="managementType" [ngClass]="{ 'is-invalid': submitted && f['managementType'].errors }">
                                        <mat-select-filter *ngIf="select4.focused" [array]="managmentData" (filteredReturn)="filteredmanagementT =$event" [displayMember]="'managementType'"></mat-select-filter>
                                        <mat-option *ngFor="let item of filteredmanagementT" [value]="item.id">
                                            {{item.management}}
                                        </mat-option>
                                    </mat-select>
                                    <div *ngIf="submitted && f['managementType'].errors" class="invalid-feedback">
                                        <div *ngIf="f['managementType'].errors['required']">Management Type is required</div>
                                    </div>
                                </mat-form-field>
                            </div>
                            <div class="col-6 mb-2 p-1">
                                <mat-form-field class="example-full-width">
                                    <mat-label>Remarks</mat-label>
                                    <textarea matInput formControlName="remarks" [ngClass]="{ 'is-invalid': submitted || f['remarks'].errors }"></textarea>
                                    <span *ngIf="(( submitted || f['remarks'].touched) && f['remarks'].errors)">
                      <span class="validation" *ngIf="f['remarks'].errors['required']||f['remarks'].errors['whitespace']">Remarks is required</span>
                                    <span class="validation" *ngIf="f['remarks'].errors['maxlength']" style="color: #d50404;">Maximum length is 255</span>
                                    <!-- <span class="validation" *ngIf="f['remarks'].errors['minlength']"  style="color: #d50404;">Minimum length is 3</span> -->
                                    </span>
                                </mat-form-field>
                            </div>
                            <div class="col-12">
                                <mat-checkbox formControlName="isDCFApplicable" class="checkbox">Is DCF Applicable</mat-checkbox>
                                <mat-error *ngIf="(form.controls['isDCFApplicable'].hasError('required')&& submitted)">It is required field</mat-error>
                            </div>
                        </div>
                    </div>


                    <!--26 Nov Start-->
                    <div class="d-flex .justify-content-center" style="margin: 2% 0px;">
                        <button id="save" type="submit" class="btn1 btn btn-sm btn-success">
            SAVE
          </button>&nbsp;&nbsp;
                        <button id="cancel" type="button" (click)="backClicked()" class="btn1 btn btn-sm btn-danger">Cancel</button>
                    </div>


                </form>
            </mat-card-content>
        </mat-card>

    </div>
</div>


<!---University Module-->
<div class="container-fluid reg-page-bg pl-4 pr-4" *ngIf="roleId==='aac7'|| roleId==='43526'">
    <div *ngIf="showTable" class="container-fluid reg-page-bg pl-4 pr-4">

        <div class="row justify-content-between">
            <div class="col-auto show-button" *ngIf="showTable">
                <label>Show</label>&nbsp;
                <select (ngModelChange)="onChange($event)" [(ngModel)]="pageSize">
          <option *ngFor="let data of tableSize" [value]="data">
            {{ data }}
          </option>
        </select> entries
            </div>

            <div class="col-auto ml-4" *ngIf="showTable">
                <label>Search:</label>&nbsp;
                <input id="myInput" type="text" [(ngModel)]="searchText" (keyup)="applyFilter($any($event.target).value)" />
            </div>
        </div>
        <div class="table-responsive">
            <table class="table mt-2 text-left pe-2">
                <thead>
                    <tr>
                        <th>University Name</th>
                        <th>College Name</th>
                        <th>AISHE Code</th>
                        <th>College Type</th>
                        <th>Management Type</th>
                        <th>State</th>
                        <th>District</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="myTable">
                    <tr *ngFor="
              let data of userDataTable
                | searchFilter : searchText
                | paginate
                  : {
                      itemsPerPage: pageSize,
                      currentPage: page
                    };
              let i = index
            ">
                        <td>{{ data.universityName }}</td>
                        <td style="width: 26%">{{ data.collegeName }}</td>
                        <td>C-{{ data.id }}</td>
                        <td>{{ data.collegeType }}</td>
                        <td>{{ data.managementType }}</td>


                        <td>{{ data.stateName }}</td>

                        <td>{{ data.districtName }}</td>

                        <td>
                            <div class="piped d-flex">
                                <a matTooltip="Edit Info" (click)="editUser(data)">
                                    <mat-icon class="edit_icon1"> edit </mat-icon>
                                </a>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="col-md-3" *ngIf="showTable">
            Showing {{ StartLimit + 1 }} to {{ pageData }} Of {{ userDataTable.length }} entries
        </div>
        <div class="d-flex justify-content-center" *ngIf="showTable">
            <pagination-controls previousLabel="Prev" nextLabel="Next" (pageChange)="handlePageChange($event)">
            </pagination-controls>

        </div>
    </div>

    <!--Edit Form -->

    <div class="container-fluid reg-page-bg pl-4 pr-4" *ngIf="showEditTables">
        <mat-card>
            <div class="row">
                <!--<mat-card-title>Edit College</mat-card-title>-->
                <div class="col-10 d-flex justify-content-between align-items-center">
                    <h1 class="page-title position-relative mb-md-4"><span>Edit College</span></h1>


                </div>
                <div class="col-2 d-flex justify-content-end mt-2 ml-auto">
                    <a (click)="backClicked()" matTooltip="Back" style="cursor: pointer;" class="text-uppercase"><img src="assets/img/table-back.svg" class="table-back me-2" /> Back
                    </a>
                </div>
            </div>
            <mat-card-content>
                <div class="row" style="margin: 0 0 4%; border-bottom: 3px solid #a7a79f;">
                    <div class="col-sm-1">
                        <label class="form-label editLabel">Survey Year</label>
                        <p style="width: max-content;">{{surveyYear1}}</p>
                    </div>
                    <div class="col-sm-1">
                        <label class="form-label editLabel">AISHE Code</label>
                        <p style="width: max-content;">C-{{id}}</p>
                    </div>
                    <div class="col-sm-2">
                        <label class="form-label editLabel">College Name</label>
                        <p>{{collegeName1}}</p>
                    </div>
                    <div class="col-sm-2">
                        <label class="form-label editLabel">College Type</label>
                        <p>{{collegeType}}</p>
                    </div>
                    <div class="col-sm-2">
                        <label class="form-label editLabel">Management Type</label>
                        <p>{{managementType}}</p>
                    </div>
                    <div class="col-sm-2">
                        <label class="form-label editLabel">State</label>
                        <p>{{stateName}}</p>
                    </div>
                    <div class="col-sm-2">
                        <label class="form-label editLabel">District</label>
                        <p>{{districtName}}</p>
                    </div>
                </div>
                <form [formGroup]="form" (ngSubmit)="submit()">
                    <div class="animated fadeIn">

                        <div class="row" style="margin-top: 6%;">


                            <div class="col-4">
                                <mat-form-field class="example-form-field">
                                    <mat-label>College Name</mat-label>
                                    <input matInput type="text" [(ngModel)]="collegeName" formControlName="collegeName" [ngClass]="{ 'is-invalid': submitted && f['collegeName'].errors }">
                                    <div *ngIf="submitted && f['collegeName'].errors" class="invalid-feedback">
                                        <div *ngIf="f['collegeName'].errors['required']">College Name is required</div>
                                    </div>

                                </mat-form-field>
                            </div>

                            <div class="col-4">
                                <mat-form-field>
                                    <mat-select placeholder="College Type" [compareWith]="compareFn" formControlName="collegeType" [ngClass]="{ 'is-invalid': submitted && f['collegeType'].errors }">
                                        <mat-select-filter [array]="collegeTypeData" (filteredReturn)="filteredcollegeTypeData =$event" [displayMember]="'type'"></mat-select-filter>
                                        <mat-option *ngFor="let item of filteredcollegeTypeData" [value]="item.type">
                                            {{item.type}}
                                        </mat-option>
                                    </mat-select>
                                    <div *ngIf="submitted && f['collegeType'].errors" class="invalid-feedback">
                                        <div *ngIf="f['collegeType'].errors['required']">College Type is required</div>
                                    </div>
                                </mat-form-field>
                            </div>
                            <div class="col-4">

                                <mat-form-field>
                                    <mat-select placeholder="State" [compareWith]="compareFn" formControlName="stateName" (selectionChange)="getdistrictName()" [ngClass]="{ 'is-invalid': submitted && f['stateName'].errors }">
                                        <mat-select-filter [array]="userData" (filteredReturn)="filteredState =$event" [displayMember]="'name'"></mat-select-filter>
                                        <mat-option *ngFor="let item of filteredState" [value]="item.name">
                                            {{item.name}}
                                        </mat-option>
                                    </mat-select>
                                    <div *ngIf="submitted && f['stateName'].errors" class="invalid-feedback">
                                        <div *ngIf="f['stateName'].errors['required']">State Name is required</div>
                                    </div>
                                </mat-form-field>
                            </div>



                            <div class="col-4">
                                <mat-form-field>
                                    <mat-select placeholder="District" [compareWith]="compareFn" formControlName="districtName" [ngClass]="{ 'is-invalid': submitted && f['districtName'].errors }">
                                        <mat-select-filter [array]="dataDistrict" (filteredReturn)="filteredDistrict =$event" [displayMember]="'name'"></mat-select-filter>
                                        <mat-option *ngFor="let item of filteredDistrict" [value]="item.name">
                                            {{item.name}}
                                        </mat-option>
                                    </mat-select>
                                    <div *ngIf="submitted && f['districtName'].errors" class="invalid-feedback">
                                        <div *ngIf="f['districtName'].errors['required']">District Name is required</div>
                                    </div>
                                </mat-form-field>
                            </div>
                            <div class="col-4">
                                <mat-form-field>
                                    <mat-select placeholder="Management Type" [compareWith]="compareFn" formControlName="managementType" [ngClass]="{ 'is-invalid': submitted && f['managementType'].errors }">
                                        <mat-select-filter [array]="managmentData" (filteredReturn)="filteredmanagementT =$event" [displayMember]="'managementType'"></mat-select-filter>
                                        <mat-option *ngFor="let item of filteredmanagementT" [value]="item.managementType">
                                            {{item.managementType}}
                                        </mat-option>
                                    </mat-select>
                                    <div *ngIf="submitted && f['managementType'].errors" class="invalid-feedback">
                                        <div *ngIf="f['managementType'].errors['required']">Management Type is required</div>
                                    </div>
                                </mat-form-field>
                            </div>
                            <div class="col-4">
                                <mat-form-field class="example-full-width">
                                    <mat-label>Remarks</mat-label>
                                    <textarea matInput formControlName="remarks" [ngClass]="{ 'is-invalid': submitted && f['remarks'].errors }"></textarea>
                                    <div *ngIf="submitted && f['remarks'].errors" class="invalid-feedback">
                                        <div *ngIf="f['remarks'].errors['required']">Remarks is required</div>
                                    </div>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>


                    <!--26 Nov Start-->
                    <div class="d-flex .justify-content-center" style="margin: 2% 0px;">
                        <button id="save" type="submit" class="btn1" style="margin: 1.0% 0; width:8%;">
            SAVE
          </button>
                        <button id="cancel" type="button" (click)="backClicked()" class="btn2 btn1" style="margin: 1.0%;width: 8%;background-color: #d50404;">Cancel</button>
                    </div>


                </form>
            </mat-card-content>
        </mat-card>

    </div>
</div>