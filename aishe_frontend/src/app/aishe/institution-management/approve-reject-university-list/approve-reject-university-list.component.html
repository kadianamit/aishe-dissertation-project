<div class="container-fluid reg-page-bg pl-4 pr-4">

  <div class="form-group">
    <div class="form-row mr-0 ml-0">
      <div class="col-md-12 mt-0 badges p-2 mt-3">
        <div class="float-left">
          <span class="font-weight-bold text-lg">Affiliate/Deaffiliate University</span>
        </div>
      </div>
    </div>
  </div>
  <!-- <div class="col-md-12 animated fadeInDown card  mb-1 pt-1 pb-2 pr-4 pl-4 bg-light">
      <form
        [formGroup]="instiForm"
        >
        <div class="row m-3 p-4">
          <div class="col-auto col-md-3">
            <mat-form-field appearance="fill">
              <mat-label>AISHE CODE</mat-label>
              <input matInput formControlName="aisheCodeValue"/>
            </mat-form-field>
          </div>

          <div class="col-auto col-md-3">
            <mat-form-field appearance="fill">
              <mat-label>College Name</mat-label>
              <input matInput formControlName="collegeName"/>
            </mat-form-field>
          </div>

          <div class="col-auto col-md-3">
            <mat-form-field appearance="fill">
              <mat-label>State</mat-label>
              <input matInput formControlName="stateValue"/>
            </mat-form-field>
          </div>

          <div class="col-auto col-md-3">
            <mat-form-field appearance="fill">
              <mat-label>District Name</mat-label>
              <input matInput formControlName="districtValue"/>
            </mat-form-field>
          </div>

            <div class="col-auto col-md-3">
            <mat-form-field appearance="fill">
               <input matInput formControlName="reasonName" />
            </mat-form-field>
          <mat-form-field appearance="fill">
              <mat-label>De-Affiated Reason</mat-label>
              <mat-select  [disableOptionCentering]="true" #select1
              formControlName="universityValue" (selectionChange)="instiForm.get('aisheCodeValue')?.setValue('')">
                <mat-select-filter *ngIf="select1.focused"
                  [array]="universityList"
                  (filteredReturn)="filtereduniversityList = $event"
                  [displayMember]="'name'"
                ></mat-select-filter>
                <mat-option [value]="' '">All</mat-option>
                <mat-option
                  *ngFor="let university of filtereduniversityList"
                  [value]="university.id"
                >
                  {{ university.name }}
                </mat-option>
              </mat-select>
              <mat-error
              *ngIf="instiForm.controls['universityValue'].hasError('required') || instiForm.controls['universityValue'].dirty || instiForm.controls['universityValue'].value || instiForm.controls['universityValue'].touched">
              Please select University
            </mat-error>
            </mat-form-field>
          </div>

          <div class="col-auto col-md-6">
            <mat-form-field appearance="fill">
              <mat-label>Old Affiated University Name</mat-label>
              <input matInput formControlName="oldAffiliatedUniversity"/>

            </mat-form-field>
          </div>
          <div class="col-auto col-md-6">
            <mat-form-field appearance="fill">
              <mat-label>New University Name</mat-label>
              <mat-select  [disableOptionCentering]="true" #select1
              formControlName="universityValue">
                <mat-select-filter *ngIf="select1.focused"
                  [array]="universityList"
                  (filteredReturn)="filtereduniversityList = $event"
                  [displayMember]="'name'"
                ></mat-select-filter>
                <mat-option
                  *ngFor="let university of filtereduniversityList"
                  [value]="university.id"
                >
                  {{ university.name }}
                </mat-option>
              </mat-select>
              <mat-error
              *ngIf="instiForm.controls['universityValue'].hasError('required') || instiForm.controls['universityValue'].dirty || instiForm.controls['universityValue'].value || instiForm.controls['universityValue'].touched">
              Please select University
            </mat-error>
            </mat-form-field>
          </div>
          <div class="col-12 text-center">
            <button class="btn1 btn btn-sm btn-success" type="submit">Find</button>&nbsp;
            <button class="btn1 btn btn-sm btn-danger">Reset</button>
        </div>
      </div>
      </form>
  </div> -->




  <div class=" reg-page-bg pl-4 pr-4 card">
    <div class="row col-12 overflow-hidden m-3">
      <div class="col-12 col-md-2">
        <label>Show</label>&nbsp;
        <select [(ngModel)]="pageSize" (ngModelChange)="onChange($event)">
          <option *ngFor="let data of sharedService.pageSizeOptions" [value]="data">{{data}}</option>
        </select>
        entries
      </div>
      <div class="col-md-3">
        <mat-form-field style="width: 100%;">
          <mat-label>Affiliate/Deaffiliate Status</mat-label>
          <mat-select (selectionChange)="findOnData($event.value)" [(ngModel)]="status">
            <mat-option value="Affiliate">Affiliate</mat-option>
            <mat-option value="Deaffiliate">Deaffiliate</mat-option>
          </mat-select>

          <!-- <mat-error *ngIf="instiForm.controls['surveyYearValue'].hasError('required')&&issubmit">
            Please select Survey Year
          </mat-error> -->
        </mat-form-field>
      </div>
      <div class="col-12 col-md-5">
        <label>Search:</label>&nbsp;
        <input type="text" size="40" id='myInput' (change)="updateResults()" (keyup)="updateResults()"
          [(ngModel)]="searchText">
      </div>
    </div>
    <div class="col-12 table-responsive">
      <table class="table table-bordered table-sm">
        <tr>
          <th>S.No.</th>
          <th>AISHE Code</th>
          <th>College Name</th>
          <th>College Type</th>
          <th>State</th>
          <th>District</th>
          <th>Old University</th>
          <th>New University</th>
          <th *ngIf="showActionColumn()">Action</th>
        </tr>
        <ng-container
          *ngFor="let item of listData | paginate : { itemsPerPage: pageSize, currentPage: page }; let i = index">
          <tr>
            <td>{{i+StartLimit+1}}</td>
            <td>{{item.institutionCategory+'-'+item.aisheCode}}</td>
            <td>{{item.instituteName}}</td>
            <td>{{item.typeName}}</td>

            <td>{{item.stateName}}</td>
            <td>{{item.districtName}}</td>

            <td>{{item.deaffiliatingUniversityName?item.deaffiliatingUniversityName:''}}</td>
            <td>{{item.affiliatingUniversityName?item.affiliatingUniversityName:""}}</td>
            <!-- <td *ngIf="this.status=='Deaffiliate'"> {{item.deaffiliatingUniversityName?item.deaffiliatingUniversityName:''}}</td>
            <td  *ngIf="this.status=='Affiliate'"> {{item.affiliatingUniversityName?item.affiliatingUniversityName:""}}</td> -->


            <td style="width: 100px;" *ngIf="showActionColumn()">
              <mat-icon matTooltip="Click here for Approve/Reject" *ngIf="(this.status=='Deaffiliate' && item.requestStatusId==1) || (this.status=='Affiliate' && item.requestStatusId==2)"  (click)="edit(item,i)" class="pointer">trending_up</mat-icon>
              <!-- <mat-icon class="edit_icon" matTooltip="Approve/Reject" *ngIf="(this.status=='Deaffiliate' && item.requestStatusId==1) || (this.status=='Affiliate' && item.requestStatusId==2)"  (click)="edit(item,i)">edit</mat-icon> -->
              <!-- <mat-icon class="edit_icon" matTooltip="Approve/Reject"  *ngIf="this.status=='Affiliate' && item.requestStatusId==2" (click)="edit(item,i)">edit</mat-icon> -->

              <!-- <mat-icon class="delete_icon" matTooltip="Delete" (click)="delete(item)">delete_forever</mat-icon> -->
            </td>
          </tr>
        </ng-container>
      </table>
    </div>
    <div class="row col-12 overflow-hidden">
      <div class="col-12 col-md-3">
        Showing {{StartLimit + 1}} to {{pageData === -1?0:pageData}} Of {{listData.length}} entries
      </div>
      <div class="col-md-3"></div>
      <div class="col-12 col-md-6" *ngIf="listData.length !== 0">
        <pagination-controls previousLabel="Prev" nextLabel="Next" (pageChange)="handlePageChange($event)"
          screenReaderPaginationLabel="Pagination" screenReaderPageLabel="page"
          screenReaderCurrentLabel="You're on page"></pagination-controls>
      </div>
    </div>
  </div>
</div>