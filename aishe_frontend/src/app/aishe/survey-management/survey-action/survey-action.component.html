
<div class="container-fluid reg-page-bg ">
  <mat-card class="bg-light">
      <h2 class="font-weight-bold text-lg">Survey Management</h2>
      <form [formGroup]="surveyForm">
        <div class="col-md-12">
          <mat-form-field class="d-block">
            <mat-label>Survey Action</mat-label>
            <mat-select formControlName="surveyAction"  [errorStateMatcher]="errorMatcher" (selectionChange)="getActivity()" required>
              <mat-option *ngFor="let item of surveyActionList" [value]="item.id">{{item.action}}</mat-option>
            </mat-select>
          </mat-form-field>
          <mat-hint class="err-msgs"
          *ngIf="surveyForm.controls['surveyAction'].dirty ||surveyForm.controls['surveyAction'].value || surveyForm.controls['surveyAction'].touched || isFormInvalid">
          <span *ngIf="
              surveyForm.controls['surveyAction'].hasError(
                'required'
              )
            " class="errorMessage">Please select.</span>
      </mat-hint>
        </div>

        <div class="col-md-12">
          <mat-form-field class="d-block" *ngIf="showSelectServey">
              <mat-label>Survey Year</mat-label>
              <mat-select formControlName="surveyYear"  [errorStateMatcher]="errorMatcher" required (selectionChange)="getSurveyLog()" >
                <mat-option *ngFor="let item of surveyYearList" [value]="item.surveyYear">{{item.surveyYearValue}}</mat-option>
              </mat-select>
          </mat-form-field>
          <mat-form-field class="d-block" *ngIf="!showSelectServey">
            <mat-label>Survey Year</mat-label>
            <input type="text" matInput formControlName="surveyYear" minlength="4" maxlength="4">
        </mat-form-field>
          <mat-hint class="err-msgs"
                    *ngIf="surveyForm.controls['surveyYear'].dirty ||surveyForm.controls['surveyYear'].value || surveyForm.controls['surveyYear'].touched || isFormInvalid">
                    <span *ngIf="
                        surveyForm.controls['surveyYear'].hasError(
                          'required'
                        )
                      " class="errorMessage">Please select.</span>
                </mat-hint>
        </div>
  
        

        <div class="col-md-12">

          <!-- <mat-form-field class="d-block">
            <mat-label>Start Date</mat-label>
            <input matInput [matDatepicker]="picker1" readonly [min]="minSurvey" formControlName="fromDate"
               [errorStateMatcher]="errorMatcher"
              (dateChange)="handleSurveyYear($event)" placeholder="Start Date">
            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
            <mat-datepicker #picker1></mat-datepicker>

            
          </mat-form-field> -->
          <mat-form-field class="d-block">
            <mat-label>Start Date</mat-label>
            <input matInput [ngxMatDatetimePicker]="picker" placeholder="Start Date" formControlName="startDate"
               readonly (dateChange)="handleToDate($event)">
            <mat-datepicker-toggle matSuffix [for]="$any(picker)"></mat-datepicker-toggle>
            <ngx-mat-datetime-picker #picker [showSpinners]="showSpinners" [showSeconds]="showSeconds"
              [stepHour]="stepHour" [stepMinute]="stepMinute" [stepSecond]="stepSecond" [touchUi]="touchUi"
              [color]="color" [enableMeridian]="enableMeridian">
            </ngx-mat-datetime-picker>
          </mat-form-field>
          <mat-hint class="err-msgs"
          *ngIf="surveyForm.controls['startDate'].dirty || surveyForm.controls['startDate'].value || surveyForm.controls['startDate'].touched || isFormInvalid">
          <span *ngIf="
              surveyForm.controls['startDate'].hasError(
                'required'
              )
            " class="errorMessage">Please select.</span>
      </mat-hint>
        </div>
        
        <div class="col-md-12">
          <mat-form-field class="d-block">
            <mat-label>End Date</mat-label>
            <input matInput [ngxMatDatetimePicker]="picker1" placeholder="End Date" formControlName="endDate"
              [min]="minEndDate" readonly (dateChange)="handleEndDate($event)">
            <mat-datepicker-toggle matSuffix [for]="$any(picker1)"></mat-datepicker-toggle>
            <ngx-mat-datetime-picker #picker1 [showSpinners]="showSpinners" [showSeconds]="showSeconds"
              [stepHour]="stepHour" [stepMinute]="stepMinute" [stepSecond]="stepSecond" [touchUi]="touchUi"
              [color]="color" [enableMeridian]="enableMeridian">
            </ngx-mat-datetime-picker>
          </mat-form-field>
        </div>
  
        <div class="text-center">
          <button type="submit" class="btn btn-success btn-sm" (click)="action()"
            [matTooltip]="buttonName">{{buttonName}}</button>
        </div>
      </form>
    </mat-card>
  </div>
  